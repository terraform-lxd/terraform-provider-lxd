# incus_volume

Manages an Incus volume.

## Example Usage

```hcl
resource "incus_storage_pool" "pool1" {
  name   = "mypool"
  driver = "zfs"
}

resource "incus_volume" "volume1" {
  name = "myvolume"
  pool = incus_storage_pool.pool1.name
}
```

## Argument Reference

- `name` - **Required** - Name of the storage volume.

- `pool` - **Required** - Name of storage pool to host the volume.

- `description` - _Optional_ - Description of the volume.

- `type` - _Optional_ - The "type" of volume. The default value is `custom`,
  which is the type to use for storage volumes attached to containers.

- `content_type` - _Optional_ - Volume content type (`filesystem` or `block`)

- `config` - _Optional_ - Map of key/value pairs of
  [volume config settings](https://documentation.ubuntu.com/incus/en/latest/reference/storage_drivers/).
  Config settings vary depending on the Storage Pool used.

- `project` - _Optional_ - Name of the project where the volume will be stored.

- `remote` - _Optional_ - The remote in which the resource will be created. If
  not provided, the provider's default remote will be used.

- `target` - _Optional_ - Specify a target node in a cluster.

## Attribute Reference

The following attributes are exported:

- `location` - Name of the node where volume was created. It could be useful with Incus in cluster mode.

## Importing

Import ID syntax: `[<remote>:][<project>]/<pool>/<name>`

- `<remote>` - _Optional_ - Remote name.
- `<project>` - _Optional_ - Project name.
- `<pool>` - **Required** - Storage pool name.
- `<name>` - **Required** - Volume name.

-> Currently, only volumes of type `custom` can be imported.

### Import example

Example using terraform import command:

```shell
$ terraform import incus_volume.myvol proj/pool1/vol1
```

Example using the import block (only available in Terraform v1.5.0 and later):

```hcl
resource "incus_volume" "myvol" {
  name    = "vol1"
  pool    = "pool1"
  project = "proj"
}

import {
  to = incus_volume.myvol
  id = "proj/pool1/vol1"
}
```

## Notes

- Technically, an Incus volume is simply a container or profile device of
  type `disk`.

- The volume resource `config` includes some keys that can be automatically generated by the Incus.
  If these keys are not explicitly defined by the user, they will be omitted from the Terraform
  state and treated as computed values.
  - `block.filesystem`
  - `block.mount_options`
  - `volatile.*`
